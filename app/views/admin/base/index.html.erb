<% provide(:manage, 'Dashbard') %>
<div class="row">
   <div class="col-lg-3 col-md-6">
      <div class="panel panel-primary">
         <div class="panel-heading">
            <div class="row">
               <div class="col-xs-3">
                  <i class="fa fa-codepen fa-5x"></i>
               </div>
               <div class="col-xs-9 text-right">
                  <div class="huge"><%= @count_pro %></div>
                  <div>Products</div>
               </div>
            </div>
         </div>
         <a href="/admin/products">
            <div class="panel-footer">
               <span class="pull-left">View Details</span>
               <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
               <div class="clearfix"></div>
            </div>
         </a>
      </div>
   </div>
   <div class="col-lg-3 col-md-6">
      <div class="panel panel-green" id="green-border">
         <div class="panel-heading">
            <div class="row">
               <div class="col-xs-3">
                  <i class="fa fa-users fa-5x"></i>
               </div>
               <div class="col-xs-9 text-right">
                  <div class="huge"><%= @users %></div>
                  <div>Users</div>
               </div>
            </div>
         </div>
         <a href="/admin/users">
            <div class="panel-footer">
               <span class="pull-left">View Details</span>
               <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
               <div class="clearfix"></div>
            </div>
         </a>
      </div>
   </div>
   <div class="col-lg-3 col-md-6">
      <div class="panel panel-yellow" id="yellow-border">
         <div class="panel-heading">
            <div class="row">
               <div class="col-xs-3">
                  <i class="fa fa-shopping-cart fa-5x"></i>
               </div>
               <div class="col-xs-9 text-right">
                  <div class="huge"><%= @orders %></div>
                  <div>Orders</div>
               </div>
            </div>
         </div>
         <a href="/admin/orders">
            <div class="panel-footer">
               <span class="pull-left">View Details</span>
               <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
               <div class="clearfix"></div>
            </div>
         </a>
      </div>
   </div>
   <div class="col-lg-3 col-md-6">
      <div class="panel panel-red" id="red-border">
         <div class="panel-heading">
            <div class="row">
               <div class="col-xs-3">
                  <i class="fa fa-support fa-5x"></i>
               </div>
               <div class="col-xs-9 text-right">
                  <div class="huge"><%= @auctions %></div>
                  <div>Auctions</div>
               </div>
            </div>
         </div>
         <a href="/admin/auctions">
            <div class="panel-footer">
               <span class="pull-left">View Details</span>
               <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
               <div class="clearfix"></div>
            </div>
         </a>
      </div>
   </div>
</div>
<div class="row">
   <div class="col-lg-8">
      <div class="panel panel-default">
         <div class="panel-heading">
            <i class="fa fa-bar-chart-o fa-fw"></i> Order Chart
         </div>
         <div class="panel-body">
            <canvas id="myChart"></canvas> 
         </div>
      </div>
   </div>
   <div class="col-lg-4">
      <div class="panel panel-default">
         <div class="panel-heading">
            <i class="fa fa-bell fa-fw"></i> Top products seller
         </div>
         <div class="panel-body">
            <div class="list-group">
               <% @top_auctions.each do |pro| %>
                 <a href="#" class="list-group-item" style="font-size: 12px;">
                   <%= image_tag(pro.assets.first.file_url, class: "avatar detail-item", alt: "Avatar") %>
                   <%= pro.name %>
                 <span class="pull-right text-muted small" style="margin-top: 15px;"><em><%= pro.auctions.size %> auctions</em>
                 </span>
                 </a>
               <% end %>
            </div>
         </div>
      </div>
   </div>
</div>
<script>
  window.onload = function () {
    obj = report_order();
    console.log(obj);
    var ctx = document.getElementById('myChart');
    var myChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: obj.date,
        datasets: [{
          label: 'Orders',
          data: obj.count,
          backgroundColor: [
            'rgba(255, 99, 132, 0.2)',
            'rgba(54, 162, 235, 0.2)',
            'rgba(255, 206, 86, 0.2)',
            'rgba(75, 192, 192, 0.2)',
            'rgba(153, 102, 255, 0.2)',
            'rgba(255, 159, 64, 0.2)'
            ],
          borderColor: [
            'rgba(255, 99, 132, 1)',
            'rgba(54, 162, 235, 1)',
            'rgba(255, 206, 86, 1)',
            'rgba(75, 192, 192, 1)',
            'rgba(153, 102, 255, 1)',
            'rgba(255, 159, 64, 1)'
          ],
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          xAxes: [{
            stacked: true
          }],
          yAxes: [{
            stacked: true
          }]
        }
      }
    });
  };
</script>
